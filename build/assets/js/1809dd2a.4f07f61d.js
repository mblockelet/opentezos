"use strict";(self.webpackChunkopentezos=self.webpackChunkopentezos||[]).push([[6648],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return h}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),h=o,m=u["".concat(s,".").concat(h)]||u[h]||d[h]||r;return n?a.createElement(m,l(l({ref:t},c),{},{components:n})):a.createElement(m,l({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3653:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return u}});var a=n(7462),o=n(3366),r=(n(7294),n(3905)),l=["components"],i={id:"cli-baker",title:"CLI to become a baker",authors:"Maxime Sallerin"},s=void 0,p={unversionedId:"baking/cli-baker",id:"baking/cli-baker",title:"CLI to become a baker",description:"In this chapter, we will see the CLI command lines for registering as a delegate. Then we will see how to exercise your rights as a baker, endorser, and accuser.",source:"@site/docs/baking/cli-baker.md",sourceDirName:"baking",slug:"/baking/cli-baker",permalink:"/baking/cli-baker",editUrl:"https://gitlab.com/tezos-paris-hub/opentezos/-/blob/main/docs/baking/cli-baker.md",tags:[],version:"current",lastUpdatedBy:"Aymeric",lastUpdatedAt:1627830816,formattedLastUpdatedAt:"8/1/2021",frontMatter:{id:"cli-baker",title:"CLI to become a baker",authors:"Maxime Sallerin"},sidebar:"docs",previous:{title:"List of bakers",permalink:"/baking/bakers_list"},next:{title:"Exam",permalink:"/baking/exam"}},c=[{value:"Running a Delegate",id:"running-a-delegate",children:[{value:"What you need",id:"what-you-need",children:[],level:3},{value:"Deposit",id:"deposit",children:[],level:3},{value:"Registration",id:"registration",children:[{value:"Create a basic wallet",id:"create-a-basic-wallet",children:[],level:4},{value:"Supply your wallet",id:"supply-your-wallet",children:[],level:4},{value:"Register as a delagate",id:"register-as-a-delagate",children:[],level:4}],level:3},{value:"Baker",id:"baker",children:[],level:3},{value:"Endorser",id:"endorser",children:[],level:3},{value:"Accuser",id:"accuser",children:[],level:3}],level:2},{value:"Example for baking on the Florencenet testnet",id:"example-for-baking-on-the-florencenet-testnet",children:[{value:"Download a snapshot for your target network",id:"download-a-snapshot-for-your-target-network",children:[],level:3},{value:"Configure the node for running on Florencenet",id:"configure-the-node-for-running-on-florencenet",children:[],level:3},{value:"Generate node identity",id:"generate-node-identity",children:[],level:3},{value:"Import the snapshot into the node data directory",id:"import-the-snapshot-into-the-node-data-directory",children:[],level:3},{value:"Run the node",id:"run-the-node",children:[],level:3},{value:"Bootstrapped",id:"bootstrapped",children:[],level:3},{value:"Get free testnet Tez",id:"get-free-testnet-tez",children:[],level:3},{value:"Register as a delegate",id:"register-as-a-delegate",children:[],level:3},{value:"Run the baker",id:"run-the-baker",children:[],level:3}],level:2},{value:"Switching testnet",id:"switching-testnet",children:[],level:2},{value:"References",id:"references",children:[],level:2}],d={toc:c};function u(e){var t=e.components,n=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In this chapter, we will see the CLI command lines for registering as a delegate. Then we will see how to exercise your rights as a baker, endorser, and accuser."),(0,r.kt)("p",null,"This chapter requires the deployment of your own Tezos node, explained in the module ",(0,r.kt)("a",{parentName:"p",href:"/deploy-a-node"},"Deploy a node"),"."),(0,r.kt)("h2",{id:"running-a-delegate"},"Running a Delegate"),(0,r.kt)("p",null,"A delegate is responsible for baking blocks, endorsing blocks, and accusing other delegates if they try to double bake or double endorse."),(0,r.kt)("h3",{id:"what-you-need"},"What you need"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A reliable internet connection"),(0,r.kt)("li",{parentName:"ul"},"At least 8,000\ua729 (1 roll) in your wallet"),(0,r.kt)("li",{parentName:"ul"},"A Tezos node configured and running (if not, please go ",(0,r.kt)("a",{parentName:"li",href:"/deploy-a-node"},"here"),")")),(0,r.kt)("h3",{id:"deposit"},"Deposit"),(0,r.kt)("p",null,"When baking or endorsing a block, a security deposit (>8,000\ua729) is frozen for 5 cycles from the account of the delegate. Hence a delegate must have enough funds to be able to pay security deposits for all the blocks it can potentially bake/endorse during 5 cyles. The current deposits are 512\ua729 for baked block and 64\ua729 for endorsement."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note that it is necessary to have at least 10% of your stake to follow the deposits.")),(0,r.kt)("h3",{id:"registration"},"Registration"),(0,r.kt)("h4",{id:"create-a-basic-wallet"},"Create a basic wallet"),(0,r.kt)("p",null,"The Tezos client is also a basic wallet. After the activation command below, you will notice that the Tezos client data directory (by default, ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.tezos-client"),") has been populated with 3 files:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"public_key_hashs")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"public_keys")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"secret_keys"))),(0,r.kt)("p",null,"The content of each file is in JSON format and keeps the mapping between aliases (",(0,r.kt)("em",{parentName:"p"},"e.g.")," ",(0,r.kt)("em",{parentName:"p"},"bob"),") and the kind of keys indicated by the name of each file"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client gen keys bob\n")),(0,r.kt)("h4",{id:"supply-your-wallet"},"Supply your wallet"),(0,r.kt)("p",null,"Now that you have created an account, you need to supply it with real Tez."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Warning! Be sure you are on the ",(0,r.kt)("strong",{parentName:"p"},"mainnet")," if you send ",(0,r.kt)("strong",{parentName:"p"},"real Tez"),".")),(0,r.kt)("p",null,"You can get the address of the previously created wallet with the following command: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client list known addresses\n")),(0,r.kt)("p",null,"You can now send to ",(0,r.kt)("em",{parentName:"p"},"bob")," any number of Tez from a wallet of your choice."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Be careful, if you are not sure what you are doing, start by sending a small amount. Then send the whole amount. (8,000\ua729 is the minimum to register as a delegate).")),(0,r.kt)("p",null,"Copy and paste the destination address into the search bar of an explorer (like ",(0,r.kt)("a",{parentName:"p",href:"https://tzstats.com/"},"TzStats"),") to see the transaction. The address should be visible in the explorer after the first transaction."),(0,r.kt)("p",null,"You can check the amount that ",(0,r.kt)("em",{parentName:"p"},"bob")," holds with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client get balance for bob\n")),(0,r.kt)("h4",{id:"register-as-a-delagate"},"Register as a delagate"),(0,r.kt)("p",null,"To run a delegate, you first need to register as one using the alias of your account:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client register key bob as delegate\n")),(0,r.kt)("p",null,"Once registered, you need to wait for ",(0,r.kt)("strong",{parentName:"p"},"7")," cycles (",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mo",{parentName:"mrow"},"\u2248")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\approx")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.48312em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"\u2248")))))," 20 days) for your rights to be considered."),(0,r.kt)("h3",{id:"baker"},"Baker"),(0,r.kt)("p",null,"The baker is a ",(0,r.kt)("em",{parentName:"p"},"daemon")," that, once connected to an account, computes the baking rights for that account, collects transactions from the ",(0,r.kt)("em",{parentName:"p"},"mempool"),", and bakes a block. Note that the baker is the only program that needs ",(0,r.kt)("em",{parentName:"p"},"direct access")," to the node data directory for performance reasons."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"A daemon is a computer program that runs as a background process. ")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The mempool is made of all transactions that have been submitted for inclusion in the chain but have not yet been included in a block by a baker.")),(0,r.kt)("p",null,"Let\u2019s launch the daemon pointing to the standard node directory and baking for the user ",(0,r.kt)("em",{parentName:"p"},"bob"),"."),(0,r.kt)("p",null,"There are different command lines depending on the ",(0,r.kt)("em",{parentName:"p"},"network")," on which your node is configured:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Florencenet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-baker-009-PsFLoren")),(0,r.kt)("li",{parentName:"ul"},"Granadanet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-baker-010-PtGRANAD")),(0,r.kt)("li",{parentName:"ul"},"Mainnet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-baker-alpha"))),(0,r.kt)("p",null,"So, for ",(0,r.kt)("em",{parentName:"p"},"bob")," on the ",(0,r.kt)("em",{parentName:"p"},"Mainnet"),", the command is as follow:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-baker-alpha run with local node ~/.tezos-node bob\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Warning! Remember that having ",(0,r.kt)("strong",{parentName:"p"},"two bakers or endorsers")," running connected to ",(0,r.kt)("strong",{parentName:"p"},"the same account")," could lead to ",(0,r.kt)("strong",{parentName:"p"},"double baking/endorsing")," and ",(0,r.kt)("strong",{parentName:"p"},"the loss of all your bonds"),". If you are worried about the availability of your node when it is its turn to bake/endorse, there are other ways than duplicating your credentials (see the discussion in section ",(0,r.kt)("a",{parentName:"p",href:"https://tezos.gitlab.io/introduction/howtorun.html#inactive-delegates"},"Inactive delegates"),").",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"Never use the same account on two daemons"),".")),(0,r.kt)("h3",{id:"endorser"},"Endorser"),(0,r.kt)("p",null,"The endorser is a daemon that, once connected to an account, computes the endorsing rights for that account. Upon reception of a new block, the daemon verifies its validity and then emits an ",(0,r.kt)("em",{parentName:"p"},"endorsement operation"),". It can endorse for a specific account or, if omitted, for all accounts."),(0,r.kt)("p",null,"There are different command lines depending on the ",(0,r.kt)("em",{parentName:"p"},"network")," on which your node is configured:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Florencenet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-endorser-009-PsFLoren")),(0,r.kt)("li",{parentName:"ul"},"Granadanet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-endorser-010-PtGRANAD")),(0,r.kt)("li",{parentName:"ul"},"Mainnet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-endorser-alpha"))),(0,r.kt)("p",null,"So, for ",(0,r.kt)("em",{parentName:"p"},"all accounts")," on the ",(0,r.kt)("em",{parentName:"p"},"Mainnet"),", the command is as follow:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-endorser-alpha run\n")),(0,r.kt)("h3",{id:"accuser"},"Accuser"),(0,r.kt)("p",null,"The accuser is a daemon that monitors ",(0,r.kt)("strong",{parentName:"p"},"all blocks received on all chains")," and looks for:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"bakers who signed ",(0,r.kt)("strong",{parentName:"li"},"two blocks at the same level")),(0,r.kt)("li",{parentName:"ul"},"endorsers who injected ",(0,r.kt)("strong",{parentName:"li"},"more than one endorsement operation for the same baking slot"))),(0,r.kt)("p",null,"Upon finding such irregularity, it will respectively emit a ",(0,r.kt)("em",{parentName:"p"},"double-baking")," or ",(0,r.kt)("em",{parentName:"p"},"double-endorsing")," denunciation operation, which will cause the offender ",(0,r.kt)("strong",{parentName:"p"},"to lose its security deposit"),"."),(0,r.kt)("p",null,"There are different command lines depending on the ",(0,r.kt)("em",{parentName:"p"},"network")," on which your node is configured:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Florencenet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-accuser-009-PsFLoren")),(0,r.kt)("li",{parentName:"ul"},"Granadanet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-accuser-010-PtGRANAD")),(0,r.kt)("li",{parentName:"ul"},"Mainnet: ",(0,r.kt)("inlineCode",{parentName:"li"},"tezos-accuser-alpha"))),(0,r.kt)("p",null,"So, on the ",(0,r.kt)("em",{parentName:"p"},"Mainnet"),", the command is as follow:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-accuser-alpha run\n")),(0,r.kt)("h2",{id:"example-for-baking-on-the-florencenet-testnet"},"Example for baking on the Florencenet testnet"),(0,r.kt)("p",null,"At this point you have already ",(0,r.kt)("a",{parentName:"p",href:"/deploy-a-node/installation"},"installed Tezos")," and you know how to ",(0,r.kt)("a",{parentName:"p",href:"deploy-a-node/set-up-a-node"},"set-up-a-node"),"."),(0,r.kt)("p",null,"Open a new terminal and paste the following commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd tezos\nexport PATH=~/tezos:$PATH\n")),(0,r.kt)("p",null,"Or, if you prefer, put ",(0,r.kt)("inlineCode",{parentName:"p"},"./")," before each command line below that starts with ",(0,r.kt)("inlineCode",{parentName:"p"},"tezos-"),"."),(0,r.kt)("h3",{id:"download-a-snapshot-for-your-target-network"},"Download a snapshot for your target network"),(0,r.kt)("p",null,"Go to ",(0,r.kt)("a",{parentName:"p",href:"https://snapshots-tezos.giganode.io/"},"snapshots-tezos.giganode.io")," and download the last ",(0,r.kt)("em",{parentName:"p"},"rolling")," snapshot for a ",(0,r.kt)("strong",{parentName:"p"},"testnet"),"."),(0,r.kt)("h3",{id:"configure-the-node-for-running-on-florencenet"},"Configure the node for running on Florencenet"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node config init --data-dir ~/tezos-florencenet --network florencenet\n")),(0,r.kt)("p",null,"This command will generate a ",(0,r.kt)("inlineCode",{parentName:"p"},"tezos-florencenet"),' folder with a "',(0,r.kt)("em",{parentName:"p"},"config.json"),'" file.'),(0,r.kt)("h3",{id:"generate-node-identity"},"Generate node identity"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node identity generate --data-dir ~/tezos-florencenet\n")),(0,r.kt)("p",null,'This command will add an "',(0,r.kt)("em",{parentName:"p"},"identity.json"),'" file, which is like a ',(0,r.kt)("em",{parentName:"p"},"network identity"),"."),(0,r.kt)("h3",{id:"import-the-snapshot-into-the-node-data-directory"},"Import the snapshot into the node data directory"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node snapshot --data-dir ~/tezos-florencenet import <snapshot-file>\n")),(0,r.kt)("h3",{id:"run-the-node"},"Run the node"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node run --data-dir ~/tezos-florencenet --rpc-addr 127.0.0.1\n")),(0,r.kt)("h3",{id:"bootstrapped"},"Bootstrapped"),(0,r.kt)("p",null,"Tezos client can be used to interact with the node. It can query its status or ask the node to perform some actions. For example, after starting your node, you can check if it has finished synchronizing using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client bootstrapped\n")),(0,r.kt)("h3",{id:"get-free-testnet-tez"},"Get free testnet Tez"),(0,r.kt)("p",null,"To test the networks and help users get familiar with the system, you can obtain free ",(0,r.kt)("em",{parentName:"p"},"testnets")," Tez from a ",(0,r.kt)("a",{parentName:"p",href:"https://faucet.tzalpha.net/"},"faucet"),"."),(0,r.kt)("p",null,'This will provide a faucet account in the form of a JSON file "',(0,r.kt)("em",{parentName:"p"},"tz1xxxxxxxxx.json"),'", activated with the following command:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'tezos-client activate account john with "tz1xxxxxxxxx.json"\n')),(0,r.kt)("p",null,"The output should be something like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"Warning:\nThis is NOT the Tezos Mainnet.\nDo NOT use your fundraiser keys on this network.\n\nNode is bootstrapped.\nOperation successfully injected in the node.\nOperation hash is 'ooq6rk6Q6qSx7wq6kWdmNLdr68QCxe62hCoAdmdfSSQHqfuHuwD'\nWaiting for the operation to be included...\nOperation found in block: BLjyt74qgSQLityQ5gjgPKX7iwz2W1CJNHUR9riQkng5YXrMo82 (pass: 2, offset: 0)\nThis sequence of operations was run:\n  Genesis account activation:\n    Account: tz1bNibySZy7kjNE3e17FUBFp9fMwfTKyfGQ\n    Balance updates:\n      tz1bNibySZy7kjNE3e17FUBFp9fMwfTKyfGQ ... +\ua72915943.746838\n\nThe operation has only been included 0 blocks ago.\nWe recommend to wait more.\nUse command\n  tezos-client wait for ooq6rk6Q6qSx7wq6kWdmNLdr68QCxe62hCoAdmdfSSQHqfuHuwD to be included --confirmations 30 --branch BLj7wyDrpunegjsAJRHHPAgD7HkcK4itLxvAyQo5Td5sa6exj2j\nand/or an external block explorer.\nAccount john (tz1bNibySZy7kjNE3e17FUBFp9fMwfTKyfGQ) activated with \ua72915943.746838.\n")),(0,r.kt)("p",null,"Notice that you have a warning saying that you are ",(0,r.kt)("strong",{parentName:"p"},"not")," on the Mainnet, which is intended in our case."),(0,r.kt)("p",null,"Also you can see that account ",(0,r.kt)("em",{parentName:"p"},"john")," has 15943.746838\ua729.\nYou can check this account balance with the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client get balance for john\n")),(0,r.kt)("h3",{id:"register-as-a-delegate"},"Register as a delegate"),(0,r.kt)("p",null,"Since ",(0,r.kt)("em",{parentName:"p"},"john")," has more than 8000\ua729, we will be able to register as a delegate:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"}," tezos-client register key john as delegate\n")),(0,r.kt)("p",null,"Fortunately, we are on a testnet. And on testnets, the number of blocks per cycle is only 2048 instead of 4096. Furthermore, a block is created every 30 seconds instead of every minute. This gives cycles of about 17 hours. So, 7 cycles will ",(0,r.kt)("em",{parentName:"p"},"only")," last 5 days."),(0,r.kt)("h3",{id:"run-the-baker"},"Run the baker"),(0,r.kt)("p",null,"So, 5 days later, we must appear in the list of bakers of ",(0,r.kt)("a",{parentName:"p",href:"https://florence.tzstats.com/bakers"},"Florencenet"),"."),(0,r.kt)("p",null,"To launch the baker for the account ",(0,r.kt)("em",{parentName:"p"},"john"),", type the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-baker-009-PsFLoren run with local node ~/tezos-florencenet john\n")),(0,r.kt)("p",null,"As long as the message ",(0,r.kt)("inlineCode",{parentName:"p"},"No slot found at level xxxxxx (max_priority = 64)")," is displayed, our baker has not yet obtained the right to create a block."),(0,r.kt)("h2",{id:"switching-testnet"},"Switching testnet"),(0,r.kt)("p",null,"Tezos is a fast-evolving blockchain and testnets follow each other and replace each other. It will therefore be necessary from time to time to connect to a new network to prepare for a change."),(0,r.kt)("p",null,"Let's say we already had a node configured on ",(0,r.kt)("strong",{parentName:"p"},"Florencenet")," (like in the ",(0,r.kt)("a",{parentName:"p",href:"#example-for-baking-on-the-florencenet-testnet"},"previous example"),") and that the new tesnet has just been released, let's say its name is ",(0,r.kt)("strong",{parentName:"p"},"Newtestnet")," (for the example). "),(0,r.kt)("p",null,"To switch to ",(0,r.kt)("em",{parentName:"p"},"Newtesnet"),", we will have to initialize another Tezos node."),(0,r.kt)("p",null,"Let's create a directory that will contain all the elements of our second node:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir ~/tezos-newtestnet\n")),(0,r.kt)("p",null,"We then create the configuration, which initializes the connection to Newtestnet and the list of bootstrap peers:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node config init --data-dir ~/tezos-newtestnet --network newtestnet\n")),(0,r.kt)("p",null,"Then we generate the identity:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node identity generate --data-dir ~/tezos-newtestnet\n")),(0,r.kt)("p",null,"And finally, we can launch it, with a different RPC port than the one already running on Florencenet:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node run --rpc-addr 127.0.0.1:8733 --data-dir ~/tezos-newtestnet\n")),(0,r.kt)("p",null,"The day Florencenet is shut down, we can delete the contents of the ",(0,r.kt)("inlineCode",{parentName:"p"},".tezos-florencenet")," directory, the data of our node."),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("p",null,"[1]"," ",(0,r.kt)("a",{parentName:"p",href:"https://tezos.gitlab.io/introduction/howtorun.html#delegateregistration"},"https://tezos.gitlab.io/introduction/howtorun.html#delegateregistration")))}u.isMDXComponent=!0}}]);