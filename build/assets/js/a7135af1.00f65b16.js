"use strict";(self.webpackChunkopentezos=self.webpackChunkopentezos||[]).push([[3151],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),h=s(n),d=r,m=h["".concat(c,".").concat(d)]||h[d]||u[d]||o;return n?a.createElement(m,i(i({ref:t},p),{},{components:n})):a.createElement(m,i({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6079:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return p},default:function(){return h}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],l={id:"starting-blockchain",title:"Starting the blockchain",authors:"Maxime Sallerin"},c=void 0,s={unversionedId:"private/starting-blockchain",id:"private/starting-blockchain",title:"Starting the blockchain",description:"Activating the procotol and starting the blockchain",source:"@site/docs/private/starting-blockchain.md",sourceDirName:"private",slug:"/private/starting-blockchain",permalink:"/private/starting-blockchain",editUrl:"https://gitlab.com/tezos-paris-hub/opentezos/-/blob/main/docs/private/starting-blockchain.md",tags:[],version:"current",lastUpdatedBy:"MASA",lastUpdatedAt:1625843871,formattedLastUpdatedAt:"7/9/2021",frontMatter:{id:"starting-blockchain",title:"Starting the blockchain",authors:"Maxime Sallerin"},sidebar:"docs",previous:{title:"Genesis Bloc & Bootstrap Bakers",permalink:"/private/genesis"},next:{title:"Using the blockchain",permalink:"/private/using-blockchain"}},p=[{value:"Activating the procotol and starting the blockchain",id:"activating-the-procotol-and-starting-the-blockchain",children:[{value:"Modifying the parameter files",id:"modifying-the-parameter-files",children:[{value:"Copying the edited parameter files to Docker",id:"copying-the-edited-parameter-files-to-docker",children:[],level:4}],level:3},{value:"Starting the blockchain",id:"starting-the-blockchain",children:[],level:3}],level:2}],u={toc:p};function h(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"activating-the-procotol-and-starting-the-blockchain"},"Activating the procotol and starting the blockchain"),(0,o.kt)("p",null,"Leave the second shell running of the ",(0,o.kt)("a",{parentName:"p",href:"/genesis"},"last chapter"),"."),(0,o.kt)("p",null,"Open a third shell and go to your workspace."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd private-blockchain\n")),(0,o.kt)("p",null,"Get the names of the two containers that are now running via the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker ps\n")),(0,o.kt)("h3",{id:"modifying-the-parameter-files"},"Modifying the parameter files"),(0,o.kt)("p",null,"We also need to gather the public keys created from the two bakers started in the previous chapter. "),(0,o.kt)("p",null,"These public keys will need to be pasted into a JSON parameter file."),(0,o.kt)("p",null,"Two sample JSON files are provided, depending on the version of the network you plan to run:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"./parameters/parameters_babylonnet.json")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"./parameters/parameters_carthagenet.json"))),(0,o.kt)("p",null,"In these files, ",(0,o.kt)("inlineCode",{parentName:"p"},"bootstrap_accounts")," has information about accounts (their public keys) that have access to tokens (4M of tez in these example files). "),(0,o.kt)("p",null,"Note that all bakers should have some tokens. We need to add the public key for the baker we just created into ",(0,o.kt)("inlineCode",{parentName:"p"},"bootstrap_accounts"),"."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"go to the ",(0,o.kt)("inlineCode",{parentName:"li"},"parameters")," folder"),(0,o.kt)("li",{parentName:"ol"},"open the appropriate sample file"),(0,o.kt)("li",{parentName:"ol"},"add an entry in the ",(0,o.kt)("inlineCode",{parentName:"li"},"bootstrap_accounts")," section for each of the two public key provided in the previous step.")),(0,o.kt)("p",null,"e.g. paste entries like this into the ",(0,o.kt)("inlineCode",{parentName:"p"},"bootstrap_accounts")," section:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'[\n  "edpkvRTXYRCxCbWs4GF1shMxCab9nF3iNimPqqb2esiP5WyjAhT1dz",\n  "4000000000000"\n],\n[\n  "edpkum3W1vGfsF19uNNnjdThGvbTBXbBcKyCmEAuV5TPfensRxYyqA",\n  "4000000000000"\n],\n')),(0,o.kt)("p",null,"The existing bootstrap accounts should remain in the file and will be used later in this example."),(0,o.kt)("h4",{id:"copying-the-edited-parameter-files-to-docker"},"Copying the edited parameter files to Docker"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker cp my-parameters.json <container_name>:/parameters.json\ndocker cp my-parameters.json <container_name_1>:/parameters.json\n")),(0,o.kt)("p",null,"where:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"my-parameters.json")," is the file you have just edited. "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<container_name>")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"<container_name_1>")," can be retrieved by the command ",(0,o.kt)("inlineCode",{parentName:"li"},"docker ps"))),(0,o.kt)("h3",{id:"starting-the-blockchain"},"Starting the blockchain"),(0,o.kt)("p",null,"The last step is the activation of the protocol."),(0,o.kt)("p",null,"For this step, choose the container name corresponding to the first container we created (select the one shown to have been started earliest)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec <container_name> ./scripts/activate-protocol.sh \\\n  -A <container_ip> -P 8732 \\\n  --base-dir /base-dir --tezos-client /base-dir/tezos-client \\\n  --parameters /parameters.json\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"If you want to browse the file system inside your Docker container, you can run the command: ",(0,o.kt)("inlineCode",{parentName:"p"},"docker exec -it <container_name> bash"),".")),(0,o.kt)("p",null,"The protocol is now activated! Let's see how to use our private blockchain in the next chapter."))}h.isMDXComponent=!0}}]);