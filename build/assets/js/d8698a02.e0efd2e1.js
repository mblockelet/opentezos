"use strict";(self.webpackChunkopentezos=self.webpackChunkopentezos||[]).push([[218],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),u=r,f=d["".concat(s,".").concat(u)]||d[u]||m[u]||o;return n?a.createElement(f,i(i({ref:t},p),{},{components:n})):a.createElement(f,i({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2912:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(7294),r="root_2W3B",o=function(e){var t=e.children;return a.createElement("div",{className:r},t)}},9500:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=(n(2912),["components"]),l={id:"truffle_compilation_migration",title:"Deploy with Truffle",authors:"Benjamin Pilia"},s=void 0,c={unversionedId:"dapp/truffle_compilation_migration",id:"dapp/truffle_compilation_migration",title:"Deploy with Truffle",description:"The first step to creating a Dapp is to deploy a smart contract on the Tezos network, whether for testing or real-life use. There are several ways to do this, such as using the Tezos CLI.",source:"@site/docs/dapp/truffle_compilation_migration.md",sourceDirName:"dapp",slug:"/dapp/truffle_compilation_migration",permalink:"/dapp/truffle_compilation_migration",editUrl:"https://gitlab.com/tezos-paris-hub/opentezos/-/blob/main/docs/dapp/truffle_compilation_migration.md",tags:[],version:"current",lastUpdatedBy:"Benoit Rognier",lastUpdatedAt:1644504174,formattedLastUpdatedAt:"2/10/2022",frontMatter:{id:"truffle_compilation_migration",title:"Deploy with Truffle",authors:"Benjamin Pilia"},sidebar:"docs",previous:{title:"Introduction",permalink:"/dapp"},next:{title:"Taquito",permalink:"/dapp/taquito"}},p=[{value:"Initializing an empty project",id:"initializing-an-empty-project",children:[],level:2},{value:"Using <em>Truffle Boxes</em>",id:"using-truffle-boxes",children:[],level:2},{value:"Project Structure overview",id:"project-structure-overview",children:[],level:2},{value:"Main <em>Truffle</em> commands",id:"main-truffle-commands",children:[],level:2},{value:"Compiling smart contracts with <em>Truffle</em>",id:"compiling-smart-contracts-with-truffle",children:[{value:"About LIGO smart contracts",id:"about-ligo-smart-contracts",children:[],level:3},{value:"<em>Truffle</em> artifacts",id:"truffle-artifacts",children:[],level:3},{value:"Hand-ons",id:"hand-ons",children:[],level:3}],level:2},{value:"Deploying smart contracts with <em>Truffle</em>",id:"deploying-smart-contracts-with-truffle",children:[{value:"Using an account for the deployment",id:"using-an-account-for-the-deployment",children:[],level:3},{value:"Adding a network",id:"adding-a-network",children:[{value:"Defining accounts",id:"defining-accounts",children:[],level:4},{value:"Defining networks",id:"defining-networks",children:[],level:4},{value:"Hand-ons",id:"hand-ons-1",children:[],level:4}],level:3},{value:"Writing the migration scripts",id:"writing-the-migration-scripts",children:[{value:"Importing the smart contract to deploy",id:"importing-the-smart-contract-to-deploy",children:[],level:4},{value:"Defining the initial storage",id:"defining-the-initial-storage",children:[],level:4},{value:"Deployment",id:"deployment",children:[{value:"Deployer",id:"deployer",children:[],level:5},{value:"Network",id:"network",children:[],level:5},{value:"Account",id:"account",children:[],level:5},{value:"Migrating several contracts",id:"migrating-several-contracts",children:[],level:5}],level:4}],level:3},{value:"Hand-ons",id:"hand-ons-2",children:[],level:3},{value:"Running a migration",id:"running-a-migration",children:[],level:3}],level:2},{value:"Interacting with a deployed contract",id:"interacting-with-a-deployed-contract",children:[],level:2}],m={toc:p};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The first step to creating a Dapp is to deploy a smart contract on the ",(0,o.kt)("em",{parentName:"p"},"Tezos")," network, whether for testing or real-life use. There are several ways to do this, such as using the Tezos CLI."),(0,o.kt)("p",null,"However, during development, the smart contracts and the associated storage are likely to change: new field, field removal, structure change. For each change, a new deployment must be done."),(0,o.kt)("p",null,"Thus, the way that the contract is deployed will change accordingly, especially the initial storage. A minimal change in the storage definition can make the next deployments tiresome when using the Tezos CLI, especially if changes are made several times."),(0,o.kt)("p",null,"Mooreover, there are times when you need to deploy several smart contracts that will interact with one another. The deployment of a smart contract depends on the deployment of a previous one to get its address. Instead of deploying one after the other the smart contracts and retrieving their address, it should be possible to have an automated script that performs these actions."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle"),", developed and maintained by ",(0,o.kt)("em",{parentName:"p"},"ConsenSys Software Inc"),", solves these difficulties. This tool uses scripts to perform smart contract deployments. It uses a CLI and a few configuration files to make deployments easier and faster."),(0,o.kt)("p",null,"In this chapter, we will deploy the ",(0,o.kt)("em",{parentName:"p"},"Raffle")," smart contract, as developed in the ",(0,o.kt)("a",{parentName:"p",href:"/ligo"},"LIGO module")," onto a testnet using ",(0,o.kt)("em",{parentName:"p"},"Truffle"),"."),(0,o.kt)("h1",{id:"about-the-truffle-suite"},"About The ",(0,o.kt)("em",{parentName:"h1"},"Truffle")," Suite"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," is part of a suite of tools that make it easier to deploy written smart contracts onto a blockchain, called ",(0,o.kt)("em",{parentName:"p"},"The Truffle Suite"),". It provides:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Truffle"),": for smart contract compilation and deployment onto a network."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Ganache"),": for running a local blockchain network and test smart contracts on it."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Drizzle"),": for easy integration with frontend applications by providing a library to interact with deployed smart contracts."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Truffle Teams"),": for monitoring smart contracts")),(0,o.kt)("p",null,"The ",(0,o.kt)("em",{parentName:"p"},"Truffle")," Suite is not available for all blockchains. It supports:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Ethereum"),(0,o.kt)("li",{parentName:"ul"},"Tezos"),(0,o.kt)("li",{parentName:"ul"},"Corda"),(0,o.kt)("li",{parentName:"ul"},"Quorum"),(0,o.kt)("li",{parentName:"ul"},"Hyperledger Fabric")),(0,o.kt)("p",null,"Only ",(0,o.kt)("em",{parentName:"p"},"Truffle")," and ",(0,o.kt)("em",{parentName:"p"},"Ganache")," (still in beta) are available for Tezos for now."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," can compile and deploy ",(0,o.kt)("em",{parentName:"p"},"LIGO")," or ",(0,o.kt)("em",{parentName:"p"},"SmartPy")," scripts on the Tezos network with a single command."),(0,o.kt)("h1",{id:"truffle-installation"},(0,o.kt)("em",{parentName:"h1"},"Truffle")," Installation"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," can be installed with a docker or npm. The easiest way is to use ",(0,o.kt)("em",{parentName:"p"},"Truffle")," from the npm package."),(0,o.kt)("p",null,"You'll need to have NodeJS v8.9.4 or later on your machine."),(0,o.kt)("p",null,"Open a terminal and run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ npm install -g truffle@tezos\n")),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," will be installed globally using the ",(0,o.kt)("inlineCode",{parentName:"p"},"-g")," option."),(0,o.kt)("p",null,"For more info, you can refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://www.trufflesuite.com/docs/tezos/truffle/quickstart#installing-truffle"},"official documentation")),(0,o.kt)("h1",{id:"setting-up-a-truffle-project"},"Setting-up a ",(0,o.kt)("em",{parentName:"h1"},"Truffle")," project"),(0,o.kt)("p",null,"As described below, ",(0,o.kt)("em",{parentName:"p"},"Truffle")," is working with configuration files and scripts, which must be located in specific repositories.\nYou can set up your ",(0,o.kt)("em",{parentName:"p"},"Truffle")," project from scratch, but it is easier to use one of the two ways provided by ",(0,o.kt)("em",{parentName:"p"},"Truffle"),":"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Initializing an empty project"),(0,o.kt)("li",{parentName:"ol"},"Using a ",(0,o.kt)("em",{parentName:"li"},"Truffle")," Box")),(0,o.kt)("p",null,"These two methods generate the project structure and the configuration files (with predefined settings like accounts, networks...): the ",(0,o.kt)("em",{parentName:"p"},"Truffle")," box comes with three smart contract examples."),(0,o.kt)("h2",{id:"initializing-an-empty-project"},"Initializing an empty project"),(0,o.kt)("p",null,"Create a folder for your ",(0,o.kt)("em",{parentName:"p"},"Truffle")," project, and run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ mkdir tezos-example\n$ cd tezos-example\n$ truffle init\n")),(0,o.kt)("h2",{id:"using-truffle-boxes"},"Using ",(0,o.kt)("em",{parentName:"h2"},"Truffle Boxes")),(0,o.kt)("p",null,"A ",(0,o.kt)("em",{parentName:"p"},"Truffle box")," is a project already set up for interacting with a smart contract, that can easily and quickly be adjusted to the specific needs of a project. They can be launched instantly and modified with little work. ",(0,o.kt)("em",{parentName:"p"},"Truffle")," provides users with a global boxes repository at ",(0,o.kt)("a",{parentName:"p",href:"https://www.trufflesuite.com/boxes"},"trufflesuite.com/boxes"),". More particularly, a Tezos box is available at ",(0,o.kt)("a",{parentName:"p",href:"https://www.trufflesuite.com/boxes/tezos-example"},"trufflesuite.com/boxes/tezos-example")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"tezos-example")," box is helpful for the deployment of Dapps."),(0,o.kt)("p",null,"You can download this box with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ mkdir tezos-example\n$ cd tezos-example\n$ truffle unbox tezos-example\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("em",{parentName:"p"},"Truffle")," unbox command will not create a new tezos-example folder, but will unpack all the content in the current folder."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"You can find a ",(0,o.kt)("em",{parentName:"p"},"Truffle box")," with ",(0,o.kt)("em",{parentName:"p"},"SmartPy")," scripts at ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/truffle-box/tezos-smartpy-example-box"},"github.com/truffle-box/tezos-smartpy-example-box"))),(0,o.kt)("h1",{id:"using-truffle"},"Using ",(0,o.kt)("em",{parentName:"h1"},"Truffle")),(0,o.kt)("p",null,"Using ",(0,o.kt)("em",{parentName:"p"},"Truffle")," can be divided in two steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Configuration: modifying scripts to define the way smart contracts are deployed."),(0,o.kt)("li",{parentName:"ol"},"Compilation and deployment, with the ",(0,o.kt)("em",{parentName:"li"},"Truffle CLI"),".")),(0,o.kt)("h2",{id:"project-structure-overview"},"Project Structure overview"),(0,o.kt)("p",null,"A ",(0,o.kt)("em",{parentName:"p"},"Truffle")," project follows this structure:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"build"),": the folder containing the ",(0,o.kt)("em",{parentName:"li"},"Michelson")," code, compiled by ",(0,o.kt)("em",{parentName:"li"},"Truffle")," and used for the contract deployments. The build folder will be created or updated after each compilation command."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"contracts"),": the folder containing all the LIGO smart contracts that ",(0,o.kt)("em",{parentName:"li"},"Truffle")," has to compile."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"migrations"),": the folder containing the ",(0,o.kt)("em",{parentName:"li"},"Truffle")," deployement scripts for the deployment of the contracts."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"node_modules"),": the node modules used by the ",(0,o.kt)("em",{parentName:"li"},"Truffle")," project."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"package.json"),": the file containing the script commands, which launches a sandbox with ",(0,o.kt)("em",{parentName:"li"},"Ganache"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"scripts"),": the folder containing scripts that can be run from the CLI to execute some operation on the smart contracts."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"sandbox"),": the folder containing two accounts to use on a sandbox environment."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"test"),": the folder containing Javascript tests"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"truffle-config.js"),": the configuration file which defines networks and accounts to be used for the deployment.")),(0,o.kt)("h2",{id:"main-truffle-commands"},"Main ",(0,o.kt)("em",{parentName:"h2"},"Truffle")," commands"),(0,o.kt)("p",null,"The ",(0,o.kt)("em",{parentName:"p"},"Truffle")," CLI provides various commands that can be displayed with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ truffle --help\n")),(0,o.kt)("p",null,"The main commands are:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"compile   Compile contract source files\ninit      Initialize new and empty project\nmigrate   Run migrations to deploy contracts\nnetworks  Show addresses for deployed contracts on each network\ntest      Run JavaScript tests\n")),(0,o.kt)("h2",{id:"compiling-smart-contracts-with-truffle"},"Compiling smart contracts with ",(0,o.kt)("em",{parentName:"h2"},"Truffle")),(0,o.kt)("p",null,"In this part, the ",(0,o.kt)("inlineCode",{parentName:"p"},"tezos-example")," box is used as an example."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," is mainly used for smart contract compilation and deployment. It can also launch tests, but other tools such as ",(0,o.kt)("em",{parentName:"p"},"PyTezos")," can be used for that."),(0,o.kt)("p",null,"Compiling smart contracts can be done with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ truffle compile\n")),(0,o.kt)("p",null,"Input: valid smart contracts (i.e compiling smart contracts), located in ",(0,o.kt)("inlineCode",{parentName:"p"},"contract")," directory"),(0,o.kt)("p",null,"Output: ",(0,o.kt)("em",{parentName:"p"},"Truffle")," artifacts, stored into the build/contracts directory."),(0,o.kt)("h3",{id:"about-ligo-smart-contracts"},"About LIGO smart contracts"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," can compile LIGO smart contracts, using the installed LIGO compiler. But they ",(0,o.kt)("strong",{parentName:"p"},"MUST")," be stored in the ",(0,o.kt)("em",{parentName:"p"},"contracts")," folder. ",(0,o.kt)("em",{parentName:"p"},"Truffle")," considers each LIGO file as an independent smart contract. Thus, if a smart contract is split into several LIGO files, ",(0,o.kt)("em",{parentName:"p"},"Truffle")," will try to compile each file as a separate smart contract, resulting in a failed compilation. There is a workaround for this behavior:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create a new folder in the project root directory, called ",(0,o.kt)("inlineCode",{parentName:"li"},"src")," for instance."),(0,o.kt)("li",{parentName:"ol"},"Move all your smart contracts files into ",(0,o.kt)("inlineCode",{parentName:"li"},"src/"),"."),(0,o.kt)("li",{parentName:"ol"},"Create a LIGO file, importing the main file from ",(0,o.kt)("inlineCode",{parentName:"li"},"src/"),".")),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," will successfully compile your split smart contract."),(0,o.kt)("h3",{id:"truffle-artifacts"},(0,o.kt)("em",{parentName:"h3"},"Truffle")," artifacts"),(0,o.kt)("p",null,"For each LIGO file found in the contract, ",(0,o.kt)("em",{parentName:"p"},"Truffle")," will yield an artifact in build/contracts."),(0,o.kt)("p",null,"An artifact is a JSON file containing the compiled smart contract, the LIGO source code and the deployment information."),(0,o.kt)("p",null,"The example below is the artifact yielded for the ",(0,o.kt)("inlineCode",{parentName:"p"},"Counter.ligo")," file fron the ",(0,o.kt)("a",{parentName:"p",href:"/docs/ligo"},"LIGO module"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "contractName": "Counter",\n  "abi": [],\n  "michelson": "<Michelson code as json>",\n  "source": "<Content of the LIGO file from contract>",\n  "sourcePath": "path/to/truffle-example/contracts/Counter.ligo",\n  "compiler": {\n    "name": "ligo",\n    "version": "next"\n  },\n  "networks": {},\n  "schemaVersion": "3.2.0-tezos.1",\n  "updatedAt": "2021-03-19T14:27:16.197Z"\n}\n')),(0,o.kt)("p",null,"These artifacts are then used in the deployment scripts."),(0,o.kt)("h3",{id:"hand-ons"},"Hand-ons"),(0,o.kt)("p",null,"Let's create a truffle project for the ",(0,o.kt)("em",{parentName:"p"},"Raffle")," Smart contract, and compile the LIGO code into a ",(0,o.kt)("em",{parentName:"p"},"Michelson")," code, with ",(0,o.kt)("em",{parentName:"p"},"Truffle"),".\nFirst, we will download the ",(0,o.kt)("inlineCode",{parentName:"p"},"tezos-example")," box and then remove the example contracts."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ mkdir truffle-raffle\n$ cd truffle-raffle\n$ truffle unbox tezos-example\n$ rm -rf contracts/* migrations/*\n")),(0,o.kt)("p",null,"Let's put the ",(0,o.kt)("a",{parentName:"p",href:"/ligo/write-contracts-ligo#refactoring-the-closeraffle-entrypoint"},"Raffle smart contract")," into our Truffle project:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ touch contracts/Raffle.ligo\n")),(0,o.kt)("p",null,"Let's copy and paste the LIGO code into this file."),(0,o.kt)("p",null,"Everything is ready for the compilation:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ truffle compile\n")),(0,o.kt)("p",null,"A new JSON file has been created in the ",(0,o.kt)("inlineCode",{parentName:"p"},"build/contracts/")," directory."),(0,o.kt)("h2",{id:"deploying-smart-contracts-with-truffle"},"Deploying smart contracts with ",(0,o.kt)("em",{parentName:"h2"},"Truffle")),(0,o.kt)("p",null,"At this point, the smart contract is compiled and ready to be deployed. However, ",(0,o.kt)("em",{parentName:"p"},"Truffle")," needs to be configured so that the deployment is done on a given network, with a given account, a given initial storage, etc."),(0,o.kt)("h3",{id:"using-an-account-for-the-deployment"},"Using an account for the deployment"),(0,o.kt)("p",null,"Originating a contract costs some Tez. Thus, an account holding funds is necessary. Accounts with funds on testnets can freely be created as a JSON file using a ",(0,o.kt)("a",{parentName:"p",href:"https://faucet.tzalpha.net/"},"faucet"),"."),(0,o.kt)("h3",{id:"adding-a-network"},"Adding a network"),(0,o.kt)("h4",{id:"defining-accounts"},"Defining accounts"),(0,o.kt)("p",null,"The network configuration is handled in the ",(0,o.kt)("inlineCode",{parentName:"p"},"truffle-config.js")," file. It can execute any javascript code needed for the configuration. Some networks are already defined: ",(0,o.kt)("em",{parentName:"p"},"Mainnet")," and ",(0,o.kt)("em",{parentName:"p"},"Localhost"),". However, as the Tezos protocol constantly evolving, new networks will probably have to be added. Each network is associated with an account."),(0,o.kt)("p",null,"There are two ways of importing an account:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Importing an account into the ",(0,o.kt)("inlineCode",{parentName:"li"},"truffle-config.js")," file:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const {mnemonic, secret, password, email} = require("/path/to/faucet.json");\n')),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," will activate this account before the contract origination."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Setting ",(0,o.kt)("strong",{parentName:"li"},"already activated")," accounts in the scripts folder. Accounts can be defined according to the network. By default, a ",(0,o.kt)("em",{parentName:"li"},"sandbox")," folder is present, with two defined accounts (these two accounts are found in any sandbox). New accounts can be defined by creating a new folder, named after the network name by convention, with an ",(0,o.kt)("inlineCode",{parentName:"li"},"accounts.js")," file:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'module.exports = {\n    account_name: {\n        pkh: "<pkh>",\n        sk: "<sk>",\n        pk: "<pk>"\n    },\n<...>\n};\n')),(0,o.kt)("p",null,"Obviously faucet accounts can be imported into the ",(0,o.kt)("inlineCode",{parentName:"p"},"accounts.js")," file as well."),(0,o.kt)("h4",{id:"defining-networks"},"Defining networks"),(0,o.kt)("p",null,"The networks are defined in the ",(0,o.kt)("inlineCode",{parentName:"p"},"truffle-config.js")," file. It exports an object that defines networks. Each key in ",(0,o.kt)("em",{parentName:"p"},"networks")," sets a network, which requires:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"host"),": An RPC node (",(0,o.kt)("a",{parentName:"li",href:"https://tezostaquito.io/docs/rpc_nodes/"},"https://tezostaquito.io/docs/rpc_nodes/"),") or a local node (as shown in the development network)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"port"),": running node port."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"network_id"),": each Tezos network has an id. For instance, ",(0,o.kt)("em",{parentName:"li"},"Florencenet")," id is ",(0,o.kt)("inlineCode",{parentName:"li"},"NetXxkAx4woPLyu"),". ",(0,o.kt)("inlineCode",{parentName:"li"},"*")," matches any network."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"type"),": network type, here ",(0,o.kt)("inlineCode",{parentName:"li"},"tezos"),"."),(0,o.kt)("li",{parentName:"ul"},"A private key to create a transaction, either:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"secretKey"),(0,o.kt)("li",{parentName:"ul"},"secret, mnemonic, password, email")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'module.exports = {\n  // see <http://truffleframework.com/docs/advanced/configuration>\n  // for more details on how to specify configuration options!\n  networks: {\n      development: {\n          host: "http://localhost",\n          port: 8732,\n          network_id: "*",\n          secretKey: alice.sk,\n          type: "tezos"\n      }\n  }\n')),(0,o.kt)("h4",{id:"hand-ons-1"},"Hand-ons"),(0,o.kt)("p",null,"We will deploy our ",(0,o.kt)("em",{parentName:"p"},"Raffle")," smart contract onto ",(0,o.kt)("em",{parentName:"p"},"Edonet"),". We'll need to add this network into the ",(0,o.kt)("inlineCode",{parentName:"p"},"truffle-config.js")," file. First, we need a faucet account. Let's download a faucet from ",(0,o.kt)("a",{parentName:"p",href:"https://faucet.tzalpha.net/"},"https://faucet.tzalpha.net/")," into our root project folder."),(0,o.kt)("p",null,"Let's define an ",(0,o.kt)("em",{parentName:"p"},"Edonet")," network, that will use this faucet:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const {alice} = require(\'./scripts/sandbox/accounts\');\nconst {mnemonic, secret, password, email} = require("./faucet.json");\n\nmodule.exports = {\n    networks: {\n        development: {\n            host: "http://localhost",\n            port: 8732,\n            network_id: "*",\n            secretKey: alice.sk,\n            type: "tezos"\n        },\n        edonet: {\n            host: "https://edonet-tezos.giganode.io",\n            port: 443,\n            network_id: "*",\n            secret,\n            mnemonic,\n            password,\n            email,\n            type: "tezos"\n        },\n        [...]\n    }\n}\n;\n\n')),(0,o.kt)("h3",{id:"writing-the-migration-scripts"},"Writing the migration scripts"),(0,o.kt)("p",null,"Now that the smart contracts and the deployment network are ready, the next step is to write the deployment script. Such scripts are also called ",(0,o.kt)("em",{parentName:"p"},"migrations"),": they usually update the storage structure or initial data and the smart contract code. These scripts are located in the ",(0,o.kt)("em",{parentName:"p"},"migrations")," directory."),(0,o.kt)("p",null,"Each migration is a ",(0,o.kt)("em",{parentName:"p"},"Javascript")," file, defining the deployment tasks. It can execute any ",(0,o.kt)("em",{parentName:"p"},"Javascript")," code. Each migration starts with a number, followed by a title. ",(0,o.kt)("em",{parentName:"p"},"Truffle")," will run the migrations in an ascending order. For instance, the ",(0,o.kt)("inlineCode",{parentName:"p"},"tezos-example")," box comes with tree migrations:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1_initial_migration.js\n2_deploy_simple_storage.js\n3_deploy_counter.js\n")),(0,o.kt)("p",null,"A migration script defines:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the initial storage of the smart contract(s)"),(0,o.kt)("li",{parentName:"ul"},"the contract deployment steps: the order of deployment of smart contracts, networks, accounts")),(0,o.kt)("p",null,"These migration scripts are used the same way whether you deploy your smart contract for the first time, or you update a new version of a smart contract."),(0,o.kt)("h4",{id:"importing-the-smart-contract-to-deploy"},"Importing the smart contract to deploy"),(0,o.kt)("p",null,"The first step is to specify which smart contract is to be deployed:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'var myContract = artifacts.require("MyContract");\n')),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Truffle")," will look for a ",(0,o.kt)("em",{parentName:"p"},"MyContract.ligo")," file in the ",(0,o.kt)("em",{parentName:"p"},"contract")," directory. Thus, to import a contract, the filename of the contract (without the extension) is used (",(0,o.kt)("inlineCode",{parentName:"p"},"artifacts")," is a ",(0,o.kt)("em",{parentName:"p"},"Truffle")," keyword). It is here possible to import several smart contracts:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'var firstContract = artifacts.require("FirstContract");\nvar secondContract = artifacts.require("SecondContract");\n')),(0,o.kt)("h4",{id:"defining-the-initial-storage"},"Defining the initial storage"),(0,o.kt)("p",null,"A smart contract defines a storage. When originated, the initial storage must be set and the storage must be compliant with the structure defined in the smart contract to be deployed: the names and types must be respected. The initial storage is declared with a ",(0,o.kt)("em",{parentName:"p"},"Javascript")," syntax. Two modules can come in handy:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const { MichelsonMap } = require("@taquito/taquito"); // for Michelson maps\nconst web3 = require("web3"); // for bytes\n')),(0,o.kt)("p",null,"Below is the matching table between Javascript and LIGO."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"LIGO"),(0,o.kt)("th",{parentName:"tr",align:null},"Javascript"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"List, Tuple"),(0,o.kt)("td",{parentName:"tr",align:null},"[]")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Big_map, Map"),(0,o.kt)("td",{parentName:"tr",align:null},"const bigMap = new MichelsonMap() ",(0,o.kt)("br",null)," bigMap.set(key, values) ",(0,o.kt)("br",null)," ",(0,o.kt)("em",{parentName:"td"},"(from taquito module)"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"string, address"),(0,o.kt)("td",{parentName:"tr",align:null},"string")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"bytes"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"web3.utils.asciiToHex(string_to_convert).slice(2)"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"int, nat, mutez"),(0,o.kt)("td",{parentName:"tr",align:null},"number")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"record"),(0,o.kt)("td",{parentName:"tr",align:null},"Object {}")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"timestamp"),(0,o.kt)("td",{parentName:"tr",align:null},"Date.now()")))),(0,o.kt)("p",null,"Here is a migration example, defining a storage with essential types:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// modules import\nconst { MichelsonMap } = require("@taquito/taquito"); // used for big maps\nconst web3 = require("web3"); // used for bytes\n\n// contract to deploy\nvar MyContract = artifacts.require("MyContract");\n\n// initial storage definition\nconst admin = "tz1ibMpWS6n6MJn73nQHtK5f4ogyYC1z9T9z"; //address\nconst emptyBigMap = new MichelsonMap(); // empty big map\nconst bigMapWithAnElement = new MichelsonMap(); // empty big map\nbigMapWithAnElement.set(\n    1, {\n        param1: 5,\n        param2: "second param"\n    }\n); // previous big map with a object (record in ligo) as value, and an int as key\nconst emptySet = []; // empty set\nconst myBytes = web3.utils.asciiToHex("string to convert into bytes").slice(2); // bytes\nconst counter = 10; // int\n\nconst initialStorage = {\n    "contractAdmin": admin,\n    "contractFirstBigMap": emptyBigMap,\n    "contractSecondBigMap": bigMapWithAnElement,\n    "contractSet": emptySet,\n    "contractCounter": metadata,\n};\n')),(0,o.kt)("p",null,"Any type and structure change in the LIGO smart contract storage must be mirrored in the ",(0,o.kt)("inlineCode",{parentName:"p"},"initialStorage")," variable. This way, the evolution of the storage used can be versioned."),(0,o.kt)("h4",{id:"deployment"},"Deployment"),(0,o.kt)("p",null,"The last step of the migration is the deployment definition. It's a function export, which defines how the contracts should be deployed."),(0,o.kt)("p",null,"This function takes three arguments:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"deployer"),": truffle object which deploys a contract."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"network"),": the network used."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"account"),": the account used.")),(0,o.kt)("h5",{id:"deployer"},"Deployer"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"deployer")," object deploys the code on the specified ",(0,o.kt)("em",{parentName:"p"},"network"),". The deployer takes the ",(0,o.kt)("inlineCode",{parentName:"p"},"initialStorage")," object and a few options as input."),(0,o.kt)("p",null,"A minimal viable migration could be:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'var MyContract = artifacts.require("MyContract");\nconst initialStorage = {}\nmodule.exports = (deployer, network, account) => {\n    // deployment steps\n    deployer.deploy(MyContract, initialStorage);\n};\n')),(0,o.kt)("p",null,"The execution returns some data such as the contract address, the cost, etc."),(0,o.kt)("h5",{id:"network"},"Network"),(0,o.kt)("p",null,"It can be useful to deploy a smart contract differently according to the network. For instance, if the storage holds an administator address, it's likely to be different on the mainnet and on testnet. The migration can be branched according to the network, like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'var MyContract = artifacts.require("MyContract");\nconst edonetInitialStorage = {}\nconst mainnetInitialStorage = {}\nmodule.exports = (deployer, network, account) => {\n    if (network === "edonet") {\n        deployer.deploy(MyContract, edonetInitialStorage);\n    } else {\n        deployer.deploy(MyContract, mainnetInitialStorage);\n    }\n\n};\n')),(0,o.kt)("p",null,"The deployment changes according to the network. Here, the storage is different on each network."),(0,o.kt)("h5",{id:"account"},"Account"),(0,o.kt)("p",null,"The admin account can be set at deployment."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'var MyContract = artifacts.require("MyContract");\nconst initialStorage = {admin: "tz1ibMpWS6n6MJn73nQHtK5f4ogyYC1z9T9z"}\nmodule.exports = (deployer, network, account) => {\n    deployer.deploy(MyContract, {...initialStorage, admin: account[0]});\n\n};\n')),(0,o.kt)("h5",{id:"migrating-several-contracts"},"Migrating several contracts"),(0,o.kt)("p",null,"A migration can deploy several contracts at the same time. This is useful when the migration data has to be used for the deployment of another contract. Below is an example with two contracts. The second contract needs to have the address of the first contract in its initial storage."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'var firstContract = artifacts.require("firstContract");\nvar secondContract = artifacts.require("secondContract");\nconst initialStorage = {admin: "tz1ibMpWS6n6MJn73nQHtK5f4ogyYC1z9T9z", contractToCall: ""}\nmodule.exports = (deployer, network, account) => {\n    deployer.deploy(firstContract).then(function () {\n        return deployer.deploy(secondContract,\n            {\n                ...initialStorage,\n                contractToCall: firstContract.address\n            });\n    });\n\n};\n')),(0,o.kt)("h3",{id:"hand-ons-2"},"Hand-ons"),(0,o.kt)("p",null,"Let's create the migration file for our ",(0,o.kt)("em",{parentName:"p"},"Raffle")," contract: ",(0,o.kt)("inlineCode",{parentName:"p"},"1_deploy_raffle.js"),"."),(0,o.kt)("p",null,"We need to import the contract (step 1) then define the initial storage, which should have the following fields:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"admin: ",(0,o.kt)("inlineCode",{parentName:"li"},"address")),(0,o.kt)("li",{parentName:"ul"},"close_date: ",(0,o.kt)("inlineCode",{parentName:"li"},"timestamp")),(0,o.kt)("li",{parentName:"ul"},"jackpot: ",(0,o.kt)("inlineCode",{parentName:"li"},"mutez")),(0,o.kt)("li",{parentName:"ul"},"description: ",(0,o.kt)("inlineCode",{parentName:"li"},"string")),(0,o.kt)("li",{parentName:"ul"},"players: ",(0,o.kt)("inlineCode",{parentName:"li"},"address list")),(0,o.kt)("li",{parentName:"ul"},"sold_tickets: ",(0,o.kt)("inlineCode",{parentName:"li"},"nat address big_map")),(0,o.kt)("li",{parentName:"ul"},"raffle_is_open: ",(0,o.kt)("inlineCode",{parentName:"li"},"boolean")),(0,o.kt)("li",{parentName:"ul"},"winning_ticket_number_hash: ",(0,o.kt)("inlineCode",{parentName:"li"},"bytes"))),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"taquito")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"web3")," will be used for the ",(0,o.kt)("inlineCode",{parentName:"p"},"big_map")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"bytes")," types. The initial storage that is defined contains an open raffle (step 2)."),(0,o.kt)("p",null,"Finally, the deployment is defined and the admin of the contract is set to the address used for the deployment (step 3)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const Raffle = artifacts.require("Raffle"); // step 1\n// step 2\nconst {MichelsonMap} = require("@taquito/taquito");\nconst web3 = require("web3");\n\nconst admin = ""\nconst closeDate = Date.now() + 10;\nconst jackpot = 100\nconst description = ""\nconst players = []\nconst soldTickets = new MichelsonMap()\nconst raffleIsOpen = true\nconst winningTicketHash = web3.utils.asciiToHex("ec85151eb06e201cebfbb06d43daa1093cb4731285466eeb8ba1e79e7ee3fae3").slice(2)\n\nconst initialStorage = {\n    "admin": admin,\n    "close_date": closeDate.toString(),\n    "jackpot": jackpot,\n    "description": description,\n    "players": players,\n    "sold_tickets": soldTickets,\n    "raffle_is_open": raffleIsOpen,\n    "winning_ticket_number_hash": winningTicketHash\n}\n\n\n// step 3\nmodule.exports = (deployer, network, account) => {\n    deployer.deploy(Raffle, {...initialStorage, admin: account[0]})\n};\n')),(0,o.kt)("h3",{id:"running-a-migration"},"Running a migration"),(0,o.kt)("p",null,"Everything is now ready for deployment. The network and the migration account are set, the initial storage and the deployment step are defined. From the project directory, you can run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ truffle migrate --network <network_name>\n")),(0,o.kt)("p",null,"This command can be broken down into two steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Verifying that the smart contracts are already compiled. If not, it will launch a compilation."),(0,o.kt)("li",{parentName:"ol"},"Deploying the smart contracts, following the migration scripts under the ",(0,o.kt)("em",{parentName:"li"},"migration")," folder. Before the deployment, ",(0,o.kt)("em",{parentName:"li"},"Truffle")," checks if the initial storage is compliant with its ",(0,o.kt)("em",{parentName:"li"},"Michelson")," definition. If not, it will raise an exception.")),(0,o.kt)("p",null,"Each migration generally takes up to 30 seconds. Here is the console output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"1_deploy_raffle.js\n==================\n\n   Replacing 'Raffle'\n   ------------------\n   > operation hash:      onoMN7C2YNwJPeXtkXFwTrcitD9udgEQNdBGTaZD2CHVjpNsTBQ\n   > Blocks: 0            Seconds: 4\n   > contract address:    KT1N3WFAwMUvqnKMJkNrLCnWBRkLTFvRw7Vk\n   > block number:        206080\n   > block timestamp:     2021-04-26T14:38:53Z\n   > account:             tz1cGftgD3FuBmBhcwY24RaMm5D2UXLr5LHW\n   > balance:             28390.642777\n   > gas used:            11056\n   > storage used:        2101 bytes\n   > fee spent:           3.477 mtz\n   > burn cost:           0.5895 tez\n   > value sent:          0 XTZ\n   > total cost:          0.592977 XTZ\n\n   > Saving artifacts\n   -------------------------------------\n   > Total cost:            0.592977 XTZ\n\n\nSummary\n=======\n> Total deployments:   1\n> Final cost:          0.592977 XTZ\n\n")),(0,o.kt)("p",null,"The most useful data here is the deployed contract address (to later interact with it), the cost of the origination and the transaction hash (to check its status on an explorer for instance)."),(0,o.kt)("p",null,"You can find some of these data in the automatically generated JSON file under the ",(0,o.kt)("inlineCode",{parentName:"p"},"build/contracts")," folder:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{\n"contractName": "Raffle",\n"abi": [],\n"michelson": "<michelson_code>",\n"source": "<ligo_code>",\n"sourcePath": "/path/to/contracts/Raffle.ligo",\n"compiler": {\n"name": "ligo",\n"version": "next"\n},\n"networks": {\n"NetXSgo1ZT2DRUG": {\n"events": {},\n"links": {},\n"address": "KT18uWmKP5gTVh7FKHwRRwjE6XVAsm7WLHSF",\n"transactionHash": "ooWVHFdjJbvGYDp9CUhUzonRfobvnHExzqsZBQmbEHpmcuveh6Q"\n}\n},\n"schemaVersion": "3.2.0-tezos.1",\n"updatedAt": "2021-04-02T08:29:37.743Z",\n"networkType": "tezos"\n}\n')),(0,o.kt)("h2",{id:"interacting-with-a-deployed-contract"},"Interacting with a deployed contract"),(0,o.kt)("p",null,"Once the migration is done, it can be useful to verify that the contract is deployed correctly. There are many tools for this: CLI, libraries, explorers, etc. In this section, we'll keep it simple with a GUI."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://tzstats.com/"},"tzstats.com")," provides information about any public Tezos network: transactions, accounts, contracts (origination, storage, entrypoints), etc."),(0,o.kt)("p",null,"If you deployed your contract on a testsnet, e.g. Edonet you can check its status on the corresponding version of tzstats: ",(0,o.kt)("a",{parentName:"p",href:"https://edo.tzstats.com/"},"edo.tzstats.com/<contract_address>"),"."),(0,o.kt)("p",null,"You should see ",(0,o.kt)("em",{parentName:"p"},"New Smart contract created by...")," line in the ",(0,o.kt)("em",{parentName:"p"},"Calls")," section. The contract storage is also visible."),(0,o.kt)("h1",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"The first step in developing a Dapp is to deploy the smart contracts. ",(0,o.kt)("em",{parentName:"p"},"Truffle")," takes LIGO code, compiles it into Michelson code and deploys it onto any public or private network."),(0,o.kt)("p",null,"Each migration needs an initial storage that is compliant with the storage type of the Michelson code."),(0,o.kt)("p",null,"Thanks to its configuration and easily readable and versioned migration files, ",(0,o.kt)("em",{parentName:"p"},"Truffle")," is an essential tool throughout the development and deployment of a Dapp."))}d.isMDXComponent=!0}}]);